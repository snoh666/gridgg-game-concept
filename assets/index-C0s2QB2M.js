(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const p of e.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&d(p)}).observe(document,{childList:!0,subtree:!0});function l(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function d(t){if(t.ep)return;t.ep=!0;const e=l(t);fetch(t.href,e)}})();const h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAATsAAAE7AGKbv1yAAAEo0lEQVRYhe2Xy24dRRCGv6rumTm2z7FPYiVOArmABCILJHaAkBAseBE2PAJLJFZISGzY8BhsYMEDINiCuCMwBIJtHGMffDyXvhSLgZAQ+3gCC1hQq9Goe+rrv/7u6hEz498M/Vez/w/wXwDw777+Ih1yX5PEDBUekhQfEZOYsTy5evV9oDtuRYUT2mB8uHlvJv/rjRvYfQJkjBUvL51h/nI2JZnNmvHqY1IUP6nei9ACpRMur3o2Z4In/wkwurRxX8kBXOjg8NDoEs4JpfOMpwWxC+xt73IcRAes4BixQU1JQeoBUrWM3EE0IGSlKGhi8kddhUesSMLux5+PplcuLHeHh0fijreWl8w1V/OdXqaVCsXwzjrMhpfARCZbn39x8Miz1+vHn3+SGDKxjeO3X3vno6buPphcvfiCpZMXVBF52Hb5LD7QQ9VuwqockgZuCBHxsakR50fLD06NnOiOooxWR+MkjLUoyJpOnJ/xjDBWc8NhrvDbdonz/gvSQCOKSIu6HrcNWJfE2oiIkRHfdoFFCgAoxgV3i0/TZbwBO/Es6/oLCTcAAAQwsgGCSL+JMiIecYUny8kK/BFjjZyJLd6TuMVZJloDAxqTCCKCGUJRARFJgAqqJF96sjtdzYTnmt/HA0RT5jbmjD8gn+IFEUxEoJ3B7g+kNpCbJJITmEqOiRxPVwDASewBHJntsMY6W2SK0xTIpoIdHZC2vxWLYjlmnGSy4XPTkdMwgAw9AEDEsZUvca7aI9sCL4iIpIxWlbjpGnRZNCYzFQGNa+fWsDz8XLkNUEpiO05ZdTN0gRdEQSST6mBhHohNJyEkNGeSSCpH/u8BGDAuAisjXQiQDDEg7h1Sf32TEBI5GClkchnY35oNLsFdAG12XKl2UCLJTjZiNjQlgVJEK2+qzswlUAERyd6T76O33QaYFIH15Y42lciCDxQOQpPBK6NxQRGMmBVrA9lGyzQBUhyUXMk9QEY4r7domwQsls+i1JNzk1dCbc/f+GT/OTPDRJoL16+9Gcx/WY7AFpn493CSMXM9gCFkS8Q4iDytP7D+ajHfK29+dfScWUK8b9eeuP5GlLjVzGaInFxCNUMBE89n9UM9QKkwrZRSRkMA0I0l8k+1W6LFssPEZD7rRAsQrRYkBwSiwDdH59ltV3qAqtuj2/+OZmBHNKcQkHBUUxYOE4/5iqgO0ZMNFBA26ykpCwdRqTTgTQTme+zMamyBdHcBmLG0PH5r6dEr7zVSRM0xhDbsanl8cgG8Jr6v15mF/qQV68vtTRxJXH9F0nIQAGaI95vVxsZma4oPHd3u7MThIsZ2s8ZBXKLU/pBKJnTJ8CYV9drDVPXPaJxjgyAMSFDXCA6L4cSRXhM/NuvsdcuUd1xUvBeyKApG8mP2LzyNaYmkZpgKp4QAhSa2mym/dEt3JQcw62/KCqA5EIoxBxefIZVnb9fnn4RK5mZ7hp1uQqHH9wazO/6MfKoJxSr7F58ma4HrDnBhhgszJM770UMSY3jN/NieZbdduWflfw3/56OiuSO7ktnGU5RHO33rQ/DdAeX8e4zi93fHh9AbbqueshdWqPR0JX8DeRFMVAMniNwAAAAASUVORK5CYII=",w="/gridgg-game-concept/assets/spaceship-DM-OByiV.png",S="/gridgg-game-concept/assets/alien-WtlL2XsL.png",y=n=>{const a=new Image;a.src=h;const l=new Image;l.src=w;const d=new Image;d.src=S,n.width=600,n.height=600;let t=null;const e=n.getContext("2d");if(!e)return;const p={base:"#FFFFFF"},m={score:0,draw:()=>{t=requestAnimationFrame(m.draw),e.clearRect(0,0,600,600),e.beginPath(),r.check(),o.check(),e.strokeStyle=p.base,e.fillStyle=p.base,i.drawScore(),i.draw(),o.draw(),r.draw(),i.moveDir[0]!==0&&(i.moveDir[0]<1&&i.moveDir[0]>-1?i.moveDir[0]=0:(i.posX+=i.moveDir[0],i.moveDir[0]=i.moveDir[0]*i.speedFraction)),o.timeoutId||o.scheduleSpawn(),e.stroke()}},i={posX:600/2-10,posY:600/10*9-10,speedVal:5,speedFraction:.85,moveDir:[0,0],size:32,draw:()=>{e.drawImage(l,i.posX,i.posY,i.size,i.size)},drawScore:()=>{e.beginPath(),e.font="20px Arial",e.fillText(`Score: ${m.score}`,n.width/5*4,20),e.fill()},movement:s=>{s.key==="a"||s.key==="ArrowLeft"?i.moveDir[0]<1&&(i.moveDir[0]=-5):s.key==="d"||s.key==="ArrowRight"?i.moveDir[0]>-1&&(i.moveDir[0]=i.speedVal):s.key===" "?r.spawn(i.posX+i.size/2,i.posY-i.size):s.key==="x"&&o.spawn()},gameOver:()=>{i.movement=()=>{},cancelAnimationFrame(t),e.beginPath(),e.font="40px Arial",e.fillText("Game Over! Click to restart.",50,n.height/2),e.fill()}},o={positions:[],size:30,speedVal:1,fixedSpawnTimeout:5e3,factorySpawnTimeout:.95,timeoutId:0,scheduleSpawn:()=>{o.timeoutId=setTimeout(()=>{o.spawn(),o.fixedSpawnTimeout*=o.factorySpawnTimeout,o.scheduleSpawn()},o.fixedSpawnTimeout)},spawn:()=>{o.positions.push({x:Math.random()*(n.width-30-15)+15,y:-30})},draw:()=>{o.positions.length<1||o.positions.forEach((s,c)=>{o.positions[c].y+=o.speedVal,e.drawImage(d,s.x,s.y,o.size,o.size)})},check:()=>{o.positions.forEach(s=>{s.y+o.size>=n.height&&i.gameOver()})}},r={positions:[],speedVal:5,size:32,spawn:(s,c)=>{r.positions.push({x:s,y:c})},draw:()=>{r.positions.forEach((s,c)=>{r.positions[c].y-=r.speedVal,e.drawImage(a,s.x-r.size/2,s.y-r.size/4,r.size,r.size)})},check:()=>{r.positions.forEach((s,c)=>{s.y<0&&r.positions.splice(c,1),o.positions.forEach((f,g)=>{s.x>=f.x&&s.x<=f.x+o.size&&s.y>=f.y&&s.y<=f.y+o.size&&(o.positions.splice(g,1),m.score+=1)})})}};let u=3;const A=()=>{--u>0||(console.log("Starting game"),m.draw(),document.addEventListener("keydown",s=>i.movement(s)))};a.onload=A,l.onload=A,d.onload=A};document.querySelector("#app").innerHTML=`
  <div class="wrapper">
    <canvas></canvas>
  </div>
`;y(document.querySelector("canvas"));
