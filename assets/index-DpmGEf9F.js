(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))p(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const d of e.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&p(d)}).observe(document,{childList:!0,subtree:!0});function l(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function p(t){if(t.ep)return;t.ep=!0;const e=l(t);fetch(t.href,e)}})();const g=n=>{const a=new Image;a.src="./src/assets/bullet.png";const l=new Image;l.src="./src/assets/spaceship.png";const p=new Image;p.src="./src/assets/alien.png",n.width=600,n.height=600;let t=null;const e=n.getContext("2d");if(!e)return;const d={base:"#FFFFFF"},m={score:0,draw:()=>{t=requestAnimationFrame(m.draw),e.clearRect(0,0,600,600),e.beginPath(),r.check(),o.check(),e.strokeStyle=d.base,e.fillStyle=d.base,i.drawScore(),i.draw(),o.draw(),r.draw(),i.moveDir[0]!==0&&(i.moveDir[0]<1&&i.moveDir[0]>-1?i.moveDir[0]=0:(i.posX+=i.moveDir[0],i.moveDir[0]=i.moveDir[0]*i.speedFraction)),o.timeoutId||o.scheduleSpawn(),e.stroke()}},i={posX:600/2-10,posY:600/10*9-10,speedVal:5,speedFraction:.85,moveDir:[0,0],size:32,draw:()=>{e.drawImage(l,i.posX,i.posY,i.size,i.size)},drawScore:()=>{e.beginPath(),e.font="20px Arial",e.fillText(`Score: ${m.score}`,n.width/5*4,20),e.fill()},movement:s=>{s.key==="a"||s.key==="ArrowLeft"?i.moveDir[0]<1&&(i.moveDir[0]=-5):s.key==="d"||s.key==="ArrowRight"?i.moveDir[0]>-1&&(i.moveDir[0]=i.speedVal):s.key===" "?r.spawn(i.posX+i.size/2,i.posY-i.size):s.key==="x"&&o.spawn()},gameOver:()=>{i.movement=()=>{},cancelAnimationFrame(t),e.beginPath(),e.font="40px Arial",e.fillText("Game Over! Click to restart.",50,n.height/2),e.fill()}},o={positions:[],size:30,speedVal:1,fixedSpawnTimeout:5e3,factorySpawnTimeout:.95,timeoutId:0,scheduleSpawn:()=>{o.timeoutId=setTimeout(()=>{o.spawn(),o.fixedSpawnTimeout*=o.factorySpawnTimeout,o.scheduleSpawn()},o.fixedSpawnTimeout)},spawn:()=>{o.positions.push({x:Math.random()*(n.width-30-15)+15,y:-30})},draw:()=>{o.positions.length<1||o.positions.forEach((s,c)=>{o.positions[c].y+=o.speedVal,e.drawImage(p,s.x,s.y,o.size,o.size)})},check:()=>{o.positions.forEach(s=>{s.y+o.size>=n.height&&i.gameOver()})}},r={positions:[],speedVal:5,size:32,spawn:(s,c)=>{r.positions.push({x:s,y:c})},draw:()=>{r.positions.forEach((s,c)=>{r.positions[c].y-=r.speedVal,e.drawImage(a,s.x-r.size/2,s.y-r.size/4,r.size,r.size)})},check:()=>{r.positions.forEach((s,c)=>{s.y<0&&r.positions.splice(c,1),o.positions.forEach((f,w)=>{s.x>=f.x&&s.x<=f.x+o.size&&s.y>=f.y&&s.y<=f.y+o.size&&(o.positions.splice(w,1),m.score+=1)})})}};let h=3;const u=()=>{--h>0||(console.log("Starting game"),m.draw(),document.addEventListener("keydown",s=>i.movement(s)))};a.onload=u,l.onload=u,p.onload=u};document.querySelector("#app").innerHTML=`
  <div class="wrapper">
    <canvas></canvas>
  </div>
`;g(document.querySelector("canvas"));
